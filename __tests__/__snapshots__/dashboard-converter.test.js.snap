// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`converts dashbboards correctly 1`] = `
"resource \\"datadog_dashboard\\" \\"dashboard_1\\" {
title = \\"DueDiligence - Shared - Business\\"
description = \\"## Managed by Terraform\\"

widget {

group_definition {
background_color = \\"vivid_yellow\\"
layout_type = \\"ordered\\"
show_title = true
title = \\"POST 422's\\"

widget {

note_definition {
background_color = \\"white\\"
content = \\"Logs View to export: https://app.datadoghq.com/logs?saved_view=371021\\"
font_size = \\"14\\"
show_tick = false
text_align = \\"left\\"
tick_edge = \\"left\\"
tick_pos = \\"50%\\"
}
widget_layout {
height = 1
width = 7
x = 0
y = 0
}
}
widget {

query_table_definition {
has_search_bar = \\"auto\\"

request {
cell_display_mode = [\\"bar\\"]
log_query {
compute_query {
aggregation = \\"count\\"
}

group_by {
facet = \\"service\\"
limit = 30
sort_query {
aggregation = \\"count\\"
order = \\"desc\\"
}
}
group_by {
facet = \\"@Properties.ErrorCodes\\"
limit = 30
sort_query {
aggregation = \\"count\\"
order = \\"desc\\"
}
}
index = \\"transformation\\"
search_query = \\"source:due_diligence @http.method:POST $Environment $AppGroup -@Properties.ApiUser:IntegrationTests @http.status_code:422\\"
}
}
title = \\"Error Codes\\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 5
width = 5
x = 7
y = 0
}
}
widget {

log_stream_definition {
columns = [\\"service\\",\\"@Properties.ApiUser\\",\\"@Properties.ErrorCodes\\",\\"@Properties.CorrelationId\\"]
indexes = [\\"transformation\\"]
message_display = \\"inline\\"
query = <<EOF
source:due_diligence @http.method:POST $Environment $AppGroup -@Properties.ApiUser:(IntegrationTests OR TestUser) @http.status_code:422

EOF
show_date_column = true
show_message_column = false
sort {
column = \\"service\\"
order = \\"desc\\"
}
title = \\"Logs\\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 6
width = 7
x = 0
y = 1
}
}
widget {

timeseries_definition {
legend_columns = [\\"value\\",\\"avg\\",\\"sum\\",\\"min\\",\\"max\\"]
legend_layout = \\"horizontal\\"

marker {
display_type = \\"error dashed\\"
value = \\"y = 0\\"
}

request {
display_type = \\"bars\\"

formula {
formula_expression  = \\"query1\\"
}
on_right_yaxis = false

query {

  metric_query {
compute = [object Object]
data_source = \\"logs\\"
group_by = [[object Object]]
indexes = [\\"transformation\\"]
name = \\"query1\\"
search = [object Object]
}}

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = true
title = \\"Across time\\"
title_align = \\"left\\"
title_size = \\"16\\"
yaxis {
include_zero = true
max = \\"auto\\"
min = \\"auto\\"
scale = \\"linear\\"
}
}
widget_layout {
height = 2
width = 5
x = 7
y = 5
}
}
}
}

template_variable {
default = \\"*\\"
name = \\"AppGroup\\"
prefix = \\"appgroup\\"
}
template_variable {
default = \\"prod\\"
name = \\"Environment\\"
prefix = \\"env\\"
}
layout_type = \\"ordered\\"
is_read_only = false
notify_list = []
reflow_type = \\"fixed\\"
}"
`;

exports[`converts dashbboards correctly 2`] = `
"resource \\"datadog_dashboard\\" \\"dashboard_2\\" {
title = \\"DueDiligence - KYBD - Business\\"
description = \\"\\"

widget {

group_definition {
background_color = \\"vivid_blue\\"
layout_type = \\"ordered\\"
show_title = true
title = \\"Kyckr Plugin\\"

widget {

query_value_definition {
autoscale = true
custom_unit = \\" \\"
precision = 0

request {

formula {
formula_expression  = \\"query1\\"
}

query {

  metric_query {
aggregator = \\"sum\\"
data_source = \\"metrics\\"
name = \\"query1\\"
query = <<EOF
max:dd_kybd_kyckr.Create_Order{$aws_account,!result:product_price_exceeded}.rollup(count)

EOF
}}
}
title = \\"Orders Created\\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 1
width = 2
x = 0
y = 0
}
}
widget {

query_value_definition {
autoscale = true
custom_unit = \\" \\"
precision = 0

request {

formula {
formula_expression  = \\"query1\\"
}

query {

  metric_query {
aggregator = \\"sum\\"
data_source = \\"metrics\\"
name = \\"query1\\"
query = <<EOF
max:dd_kybd_kyckr.Create_Order{$aws_account,result:product_price_exceeded}.rollup(count)

EOF
}}
}
title = \\"Price Exceeded \\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 1
width = 2
x = 6
y = 0
}
}
widget {

timeseries_definition {
legend_columns = [\\"avg\\",\\"min\\",\\"max\\",\\"value\\",\\"sum\\"]
legend_layout = \\"vertical\\"


request {
display_type = \\"bars\\"

formula {
alias = \\"Price\\"
formula_expression  = \\"query1\\"
}
on_right_yaxis = false

query {

  metric_query {
data_source = \\"metrics\\"
name = \\"query1\\"
query = <<EOF
avg:dd_kybd_kyckr.Create_Order{$aws_account,!result:product_price_exceeded} by {country}

EOF
}}

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = true
title = \\"Order Price by country\\"
title_align = \\"left\\"
title_size = \\"16\\"
yaxis {
include_zero = true
label = \\"\\"
max = \\"auto\\"
min = \\"auto\\"
scale = \\"linear\\"
}
}
widget_layout {
height = 3
width = 6
x = 0
y = 1
}
}
widget {

timeseries_definition {
legend_columns = [\\"avg\\",\\"max\\",\\"value\\",\\"sum\\",\\"min\\"]
legend_layout = \\"vertical\\"


request {
display_type = \\"bars\\"

formula {
alias = \\"Price\\"
formula_expression  = \\"query1\\"
}
on_right_yaxis = false

query {

  metric_query {
data_source = \\"metrics\\"
name = \\"query1\\"
query = <<EOF
avg:dd_kybd_kyckr.Create_Order{result:product_price_exceeded,$aws_account} by {country}

EOF
}}

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = true
title = \\"Price Exceeded by country\\"
title_align = \\"left\\"
title_size = \\"16\\"
yaxis {
include_zero = true
label = \\"\\"
max = \\"auto\\"
min = \\"auto\\"
scale = \\"linear\\"
}
}
widget_layout {
height = 3
width = 6
x = 6
y = 1
}
}
widget {

heatmap_definition {

request {
q = \\"avg:dd_kybd_kyckr.Create_Order{aws_account:cko-dev} by {service,country}.as_count()\\"

style {
palette = \\"dog_classic\\"
}
}
show_legend = false
title = \\"Price Heat Map\\"
title_align = \\"left\\"
title_size = \\"16\\"
yaxis {
min = \\"0\\"
}
}
widget_layout {
height = 3
width = 12
x = 0
y = 4
}
}
}
widget_layout {
height = 8
width = 12
x = 0
y = 0
}
}

template_variable {
default = \\"cko-dev\\"
name = \\"aws_account\\"
prefix = \\"aws_account\\"
}
layout_type = \\"ordered\\"
is_read_only = false
notify_list = []

template_variable_preset {
name = \\"Dev\\"

template_variable {
name = \\"aws_account\\"
value = \\"cko-dev\\"
}
}
template_variable_preset {
name = \\"Prod\\"

}
template_variable_preset {
name = \\"QA\\"

template_variable {
name = \\"aws_account\\"
value = \\"cko-qa\\"
}
}
template_variable_preset {
name = \\"Sandbox\\"

template_variable {
name = \\"aws_account\\"
value = \\"cko-sbox\\"
}
}
reflow_type = \\"fixed\\"
}"
`;

exports[`converts screenboards correctly 1`] = `
"resource \\"datadog_dashboard\\" \\"sb_1\\" {
title = \\"Laura's Screenboard 7 Sep 2020 13:18\\"
description = \\"\\"

widget {

timeseries_definition {
legend_columns = [\\"avg\\",\\"min\\",\\"max\\",\\"value\\",\\"sum\\"]
legend_layout = \\"vertical\\"

marker {
display_type = \\"error dashed\\"
label = \\" y = 5 \\"
value = \\"y = 5\\"
}
marker {
display_type = \\"error dashed\\"
label = \\" y = 10 \\"
value = \\"y = 10\\"
}

request {
display_type = \\"line\\"
q = \\"avg:system.cpu.user{*}\\"

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = true
title = \\"\\"
title_align = \\"left\\"
title_size = \\"16\\"
yaxis {
include_zero = true
label = \\"\\"
max = \\"auto\\"
min = \\"auto\\"
scale = \\"linear\\"
}
}
widget_layout {
height = 15
width = 47
x = 3
y = 17
}
}
widget {

timeseries_definition {

request {
display_type = \\"line\\"
log_query {
compute_query {
aggregation = \\"count\\"
}

group_by {
facet = \\"service\\"
limit = 10
sort_query {
aggregation = \\"count\\"
order = \\"desc\\"
}
}
index = \\"*\\"
search_query = \\"status:(error OR emergency)\\"
}

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = false
title = \\"\\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 15
width = 47
x = 3
y = 17
}
}
widget {

heatmap_definition {

request {
q = \\"avg:system.cpu.user{*}\\"

style {
palette = \\"dog_classic\\"
}
}
show_legend = false
title = \\"Avg of system.cpu.user over *\\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 15
width = 47
x = 52
y = 0
}
}
widget {

query_value_definition {
autoscale = true
precision = 2

request {
aggregator = \\"avg\\"
q = \\"avg:datadog.agent.running{*}\\"
}
title = \\"Avg of datadog.agent.running over *\\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 15
width = 47
x = 3
y = 33
}
}
widget {

timeseries_definition {
legend_columns = [\\"avg\\",\\"min\\",\\"max\\",\\"value\\",\\"sum\\"]
legend_layout = \\"vertical\\"


request {
display_type = \\"line\\"
q = \\"avg:system.cpu.user{*}\\"

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = false
live_span = \\"1d\\"
title = \\"CPU for past day\\"
title_align = \\"left\\"
title_size = \\"16\\"
yaxis {
include_zero = true
label = \\"\\"
max = \\"auto\\"
min = \\"auto\\"
scale = \\"linear\\"
}
}
widget_layout {
height = 15
width = 47
x = 3
y = -1
}
}
widget {

service_level_objective_definition {
global_time_target = \\"5\\"
show_error_budget = true
slo_id = \\"301437ffe3e951a48fdbde5687d90609\\"
time_windows = [\\"7d\\",\\"month_to_date\\",\\"global_time\\"]
title = \\"SLO: API requests\\"
title_align = \\"center\\"
title_size = \\"16\\"
view_mode = \\"overall\\"
view_type = \\"detail\\"
}
widget_layout {
height = 21
width = 60
x = 3
y = 50
}
}
widget {

hostmap_definition {
no_group_hosts = true
no_metric_hosts = true
node_type = \\"host\\"
request {
fill {
q = \\"avg:system.cpu.user{*} by {host}\\"
}
}
style {
palette = \\"green_to_orange\\"
palette_flip = false
}
title = \\"\\"
title_align = \\"left\\"
title_size = \\"16\\"
}
widget_layout {
height = 22
width = 47
x = 52
y = 17
}
}
widget {

manage_status_definition {
color_preference = \\"text\\"
display_format = \\"list\\"
hide_zero_counts = true
query = <<EOF
tag:($monitor_env AND $app_group)

EOF
show_last_triggered = true
sort = \\"triggered,desc\\"
summary_type = \\"combined\\"
title_align = \\"left\\"
title_size = \\"13\\"
}
widget_layout {
height = 25
width = 61
x = 64
y = 40
}
}
widget {

note_definition {
background_color = \\"vivid_orange\\"
content = <<EOF
\` Shared Dashbords\`
https://app.datadoghq.com/dashboard/ezf-tjt-xcx
EOF
font_size = \\"18\\"
show_tick = false
text_align = \\"center\\"
tick_edge = \\"left\\"
tick_pos = \\"50%\\"
}
widget_layout {
height = 25
width = 20
x = 101
y = 1
}
}
widget {

log_stream_definition {
indexes = []
message_display = \\"expanded-md\\"
query = <<EOF
$dd_env $app_group status:(error OR emergency)

EOF
show_date_column = true
show_message_column = true
sort {
column = \\"service\\"
order = \\"desc\\"
}
title = \\"Plugins\\"
title_align = \\"left\\"
title_size = \\"13\\"
}
widget_layout {
height = 21
width = 33
x = 968
y = -242
}
}

layout_type = \\"free\\"
is_read_only = false
notify_list = []
}"
`;

exports[`converts timeboards correctly 1`] = `
"resource \\"datadog_dashboard\\" \\"tb_1\\" {
title = \\"Laura's Timeboard 21 Aug 2020 16:30\\"
description = \\"\\"

widget {

timeseries_definition {
legend_size = \\"0\\"

request {
display_type = \\"line\\"
q = \\"avg:system.cpu.user{*}\\"

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = false
title = \\"Avg of system.cpu.user over *\\"
yaxis {
include_zero = true
label = \\"\\"
max = \\"auto\\"
min = \\"auto\\"
scale = \\"linear\\"
}
}
}
widget {

query_value_definition {
autoscale = true
precision = 2

request {
aggregator = \\"avg\\"

conditional_formats {
comparator = \\"<\\"
palette = \\"white_on_red\\"
value = 1
}
conditional_formats {
comparator = \\">=\\"
palette = \\"white_on_green\\"
value = 1
}
q = \\"avg:datadog.agent.running{*}\\"
}
title = \\"Avg of datadog.agent.running over *\\"
}
}

template_variable {
default = \\"*\\"
name = \\"major\\"
prefix = \\"agent_version_major\\"
}
template_variable {
default = \\"*\\"
name = \\"minor\\"
prefix = \\"agent_version_minor\\"
}
template_variable {
default = \\"*\\"
name = \\"patch\\"
prefix = \\"agent_version_patch\\"
}
layout_type = \\"ordered\\"
is_read_only = false
notify_list = []

template_variable_preset {
name = \\">= 7\\"

template_variable {
name = \\"major\\"
value = \\"7\\"
}
}
template_variable_preset {
name = \\"Latest\\"

template_variable {
name = \\"major\\"
value = \\"7\\"
}
template_variable {
name = \\"minor\\"
value = \\"21\\"
}
template_variable {
name = \\"patch\\"
value = \\"1\\"
}
}
}"
`;

exports[`converts timeboards with groups correctly 1`] = `
"resource \\"datadog_dashboard\\" \\"group_db_1\\" {
title = \\"Title\\"
description = \\"Description\\"

widget {

group_definition {
layout_type = \\"ordered\\"
title = \\"ECS\\"

widget {

timeseries_definition {
legend_size = \\"0\\"

request {
display_type = \\"area\\"
on_right_yaxis = false
q = \\"sum:aws.ecs.service.running{$env,$client} by {servicename}\\"

style {
line_type = \\"solid\\"
line_width = \\"normal\\"
palette = \\"dog_classic\\"
}
}
show_legend = false
title = \\"Num Services Running\\"
yaxis {
include_zero = true
max = \\"auto\\"
min = \\"auto\\"
scale = \\"linear\\"
}
}
}
}
}

template_variable {
default = \\"*\\"
name = \\"env\\"
prefix = \\"env\\"
}
template_variable {
default = \\"*\\"
name = \\"client\\"
prefix = \\"client\\"
}
layout_type = \\"ordered\\"
is_read_only = true
notify_list = []
}"
`;
